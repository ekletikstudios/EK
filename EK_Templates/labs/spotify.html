{% extends 'labs/lab.html' %}
{% load static from staticfiles %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/spotify.css' %}">
{% endblock %}


{% block extras %}
<!-- Music -->
<div id="section-music" class="heading top-100 bottom-100">
<div class="container">
  <p><span>Música para a mente.</span></p>
  <h1>Spotify.</h1>
    <!-- respostas {{ total }} -->
  <div class="row top-40">

  {% if audios %}
  {% for audio in audios %}
      <!-- audio #{{ forloop.counter }} -->
    <div class="col-md-4 col-sm-12">
      <div class="album-wrapper">
        <div class="album-cover-wrapper">
          <img src="{{ audio.album.images.0.url }}" alt="{{ audio.name }} by {{ audio.artists.0.name }}" class="img-fluid" id="image-{{ forloop.counter }}">
        </div>
        <button class="album-play-button" onclick="PlayTrack(this.id)" id="b{{ forloop.counter }}">
        <i class="fa fa-play"></i>
        <audio class="audio-item" src="{{ audio.preview_url }}" id="song-b{{ forloop.counter }}" onended="ProcessEndedTrack(this)">
      </button>
      </div>
    <div class="hidden-info">
        <p id="title-b{{ forloop.counter }}">{{ audio.name }}</p>
        <p id="album-b{{ forloop.counter }}">{{ audio.album.name }}</p>
        <p id="artist-b{{ forloop.counter }}">{{ audio.artists.0.name }}</p>
    </div>
    </div>
      <!-- end of audio #{{ forloop.counter }} -->
  {% endfor %}
  {% else %}
      <div class="col-md-12">
        <h2>O Spotify não está a responder...</h2>
        </div>
  {% endif %}

  </div>
</div>
</div>
<!-- end Music -->
{% endblock %}

{% block js %}
<script src="{% static 'js/spotify.js' %}"></script>
{% endblock %}